<ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="medium" color="#fff" type="ball-scale-multiple" [fullScreen]="true">
	<p style="color: white ;font-size: 20px;"> {{'general.loading'|translate}}... </p>
</ngx-spinner>
<section class="inner-page-wrapper inner-page-wrapper-units">

	<div class="container-fluid">
		<div class="row">
			<div class="col-md-12">
				<div class="card">
					<div class="card-body">
						<form [formGroup]="accountForm" id="accountSubmit" class="tabs-form">
							<div class="main-branch ranoo">
								<div class="wrapper-title">

									<h3>{{'component-names.account-information'|translate}}</h3>
									<hr>
									<div class="row">

										<div class="col-md-6 col-12">
											<label for="parentId" class="label-name">
												{{'general.parent'|translate}}

											</label>
											<div class="d-flex">
												<div class="flex-grow-1">
													<div class="input-group  popup">
														<ng-select style="width:100%" formControlName="parentId"
															name='parentId' class="" id="parentId" (change)="onChange($event)">
															<ng-option *ngFor="let account of accountList"
																[value]="account.id">
																{{lang=="ar"?account.nameAr:account.nameEn}}
															</ng-option>
														</ng-select>

													</div>
												</div>
												<div class="">
													<button class="btn btn-rounded btn-dark"
														(click)="showSearchModal=true" type="button"><i
															class="fa fa-search"></i></button>
												</div>
											</div>
										</div>



										<div class="col-12 col-md-6 ">
											<label for="code" class="label-name">
												{{'general.account-number'|translate}}</label><span class="text-danger">*</span>
											<div class="form-group position-relative">
												<!-- [ngClass]="{'is-invalid':f['code'].errors || f['code'].invalid}" -->
												<input type="text" class="form-control icon-branch" name="code"
													formControlName="code">
												<div *ngIf="(f['code'].touched || f['code'].dirty ) && f['code'].invalid"
													class="validation alert-danger position-absolute">
													<i class="fa fa-close "></i>
													<span *ngIf="f['code'].errors && f['code'].errors['required']"
														class="f-12 ng-star-inserted text-white">
														{{'error.required'|translate}} </span>
												</div>

											</div>
										</div>
										<div class="col-12 col-md-6">
											<label for="nameAr" class="label-name">
												{{'general.nameAr'|translate}}</label><span class="text-danger">*</span>
											<div class="form-group position-relative">

												<input type="text" class="form-control icon-branch"
													[ngClass]="{'is-invalid':f['nameAr'].errors || f['nameAr'].invalid}"
													name="nameAr" formControlName="nameAr">
												<div *ngIf="(f['nameAr'].touched || f['nameAr'].dirty ) && f['nameAr'].invalid"
													class="validation alert-danger position-absolute">
													<i class="fa fa-close "></i>
													<span *ngIf="f['nameAr'].errors && f['nameAr'].errors['required']"
														class="f-12 ng-star-inserted text-white">
														{{'error.required'|translate}}</span>
												</div>

											</div>
										</div>
										<div class="col-12 col-md-6">
											<label for="nameEn" class="label-name">
												{{'general.nameEn'|translate}}
											</label>
											<span class="text-danger">*</span>
											<div class="form-group position-relative">

												<input type="text" class="form-control icon-branch" name="nameEn"
													formControlName="nameEn">
												<div *ngIf="(f['nameEn'].touched || f['nameEn'].dirty ) && f['nameEn'].invalid"
													class="validation alert-danger position-absolute">
													<i class="fa fa-close "></i>
													<span *ngIf="f['nameEn'].errors && f['nameEn'].errors['required']"
														class="f-12 ng-star-inserted text-white">
														{{'error.required'|translate}}</span>
												</div>

											</div>
										</div>
										<div class="col-12 col-md-6">
											<label for="voucher-type"
												class="label-name">{{'account.account-reference'|translate}}
												<span class="text-danger">*</span></label>
											<div class="form-group position-relative">
												<div class="input-group  popup">
													<ng-select class="custom m-0"
														formControlName="accountClassificationId"
														[items]="accountClassificationsEnum" bindLabel="name"
														bindValue="id" style="width:100%"></ng-select>
													<div *ngIf="(f['accountClassificationId'].touched || f['accountClassificationId'].dirty ) && f['accountClassificationId'].invalid"
														class="validation alert-danger position-absolute">
														<i class="fa fa-close "></i>
														<span
															*ngIf="f['accountClassificationId'].errors && f['accountClassificationId'].errors['required']">
															{{'validation-messages.required-field'|translate}}</span>
													</div>
												</div>
											</div>
										</div>

										<!--  -->

										<div class="col-12 col-md-6">
											<label for="code" class="label-name">
												{{'account.debitLimit'|translate}}</label>
											<div class="form-group position-relative">

												<input type="number" class="form-control icon-branch" name="debitLimit"
													formControlName="debitLimit">


											</div>
										</div>

										<div class="col-12 col-md-6">
											<label for="code" class="label-name">
												{{'account.creditLimit'|translate}}</label>
											<div class="form-group position-relative">

												<input type="number" class="form-control icon-branch" name="creditLimit"
													formControlName="creditLimit">


											</div>
										</div>
										<div class="col-12 col-md-6">
											<label for="code" class="label-name">
												{{'account.taxNumber'|translate}}</label>
											<div class="form-group position-relative">

												<input type="number" class="form-control icon-branch" name="taxNumber"
													formControlName="taxNumber">


											</div>
										</div>

										<div class="col-md-6 col-12" *ngIf="isMultiCompanies">
											<label for="companyId" class="label-name">
												{{'component-names.companies'|translate}}

											</label>
											<div class="d-flex">
												<div class="flex-grow-1">
													<div class="input-group  popup">
														<ng-select style="width:100%" formControlName="companyId"
															name='companyId' class="" id="companyId">
															<ng-option *ngFor="let company of companyList"
																[value]="company.id">
																{{lang=="ar"?company.nameAr:company.nameEn}}
															</ng-option>
														</ng-select>

													</div>
												</div>
												<div class="" *ngIf="isMultiCompanies">
													<button class="btn btn-rounded btn-dark"
														(click)="showSearchModalCompany=true" type="button"><i
															class="fa fa-search"></i>
													</button>
												</div>
											</div>
										</div>


										<div class="col-md-6 col-12">
											<label for="costCenterId" class="label-name">
												{{'component-names.costCenter'|translate}}

											</label>
											<div class="d-flex">
												<div class="flex-grow-1">
													<div class="input-group  popup">
														<ng-select style="width:100%" formControlName="costCenterId"
															name='costCenterId' class="" id="costCenterId">
															<ng-option *ngFor="let costCenter of costCenterList"
																[value]="costCenter.id">
																{{lang=="ar"?costCenter.nameAr:costCenter.nameEn}}
															</ng-option>
														</ng-select>

													</div>
												</div>
												<div class="">
													<button class="btn btn-rounded btn-dark"
														(click)="showSearchModalCostCenter=true" type="button"><i
															class="fa fa-search"></i>
													</button>
												</div>
											</div>

										</div>



										<div class="col-md-6 col-12" *ngIf="isMultiCurrency">
											<label for="currencyId" class="label-name">
												{{'general.currency'|translate}}

											</label>
											<div class="d-flex">
												<div class="flex-grow-1">
													<div class="input-group  popup">
														<ng-select style="width:100%" formControlName="currencyId"
															name='currencyId' class="" id="currencyId">
															<ng-option *ngFor="let currency of currencyList"
																[value]="currency.id">
																{{lang=="ar"?currency.nameAr:currency.nameEn}}
															</ng-option>
														</ng-select>

													</div>
												</div>
												<div class="" *ngIf="isMultiCurrency">
													<button class="btn btn-rounded btn-dark"
														(click)="showSearchModalCurrency=true" type="button"><i
															class="fa fa-search"></i>
													</button>
												</div>
											</div>

										</div>


										<div class="col-md-6 col-12">

											<label for="accountGroupId" class="label-name">
												{{'component-names.accountGroup'|translate}}

											</label>
											<div class="d-flex">
												<div class="flex-grow-1">
													<div class="input-group  popup">
														<ng-select style="width:100%" formControlName="accountGroupId"
															name='accountGroupId' class="" id="accountGroupId">
															<ng-option *ngFor="let accountGroup of accountGroupList"
																[value]="accountGroup.id">
																{{lang=="ar"?accountGroup.nameAr:accountGroup.nameEn}}
															</ng-option>
														</ng-select>
													</div>

												</div>
												<div class="">
													<button class="btn btn-rounded btn-dark"
														(click)="showSearchModalAccountGroup=true" type="button"><i
															class="fa fa-search"></i>
													</button>
												</div>

											</div>
										</div>

										<div class="col-md-6 col-12">
											<label for="accountType" class="label-name">
												{{'account.accountType'|translate}}

											</label>
											<span class="text-danger">*</span>
											<div class="input-group  popup">
												<ng-select style="width:100%" formControlName="accountType"
													name='accountType' class="" id="accountType" (change)="onAccountTypeChange($event)">
													<ng-option *ngFor="let accountType of accountTypeList"
														[value]="accountType.value">
														{{lang=="ar"?accountType.nameAr:accountType.nameEn}}
													</ng-option>
												</ng-select>

											</div>
											<div *ngIf="(f['accountType'].touched || f['accountType'].dirty ) && f['accountType'].invalid"
											class="validation alert-danger position-absolute">
											<i class="fa fa-close "></i>
											<span *ngIf="f['accountType'].errors && f['accountType'].errors['required']"
												class="f-12 ng-star-inserted text-white">
												{{'error.required'|translate}} </span>
										</div>

										</div>
										<div class="col-md-6 col-12"
											*ngIf="accountForm.controls['accountType'].value==2;">
											<label for="budget" class="label-name">
												{{'account.budget'|translate}}

											</label>
											<span class="text-danger">*</span>
											<div class="input-group  popup">
												<ng-select style="width:100%" formControlName="budget" name='budget'
													class="" id="budget">
													<ng-option *ngFor="let budget of budgetList" [value]="budget.value">
														{{lang=="ar"?budget.nameAr:budget.nameEn}}
													</ng-option>
												</ng-select>

											</div>
										

										</div>
										<div *ngIf="(f['budget'].touched || f['budget'].dirty ) && f['budget'].invalid"
										class="validation alert-danger position-absolute">
										<i class="fa fa-close "></i>
										<span *ngIf="f['budget'].errors && f['budget'].errors['required']"
											class="f-12 ng-star-inserted text-white">
											{{'error.required'|translate}} </span>
									</div>
										<div class="col-md-6 col-12"
											*ngIf="accountForm.controls['accountType'].value==1;">
											<label for="accountClassificationIdOfIncomeStatement" class="label-name">
												{{'account.account-classification-income-statement'|translate}}

											</label>
											<span class="text-danger">*</span>
											<div class="input-group  popup">
												<ng-select style="width:100%"
													formControlName="accountClassificationIdOfIncomeStatement"
													name='accountClassificationIdOfIncomeStatement' class=""
													id="accountClassificationIdOfIncomeStatement">
													<ng-option
														*ngFor="let accountClassification of accountClassificationListOfIncomeStatement"
														[value]="accountClassification.id">
														{{lang=="ar"?accountClassification.nameAr:accountClassification.nameEn}}
													</ng-option>
												</ng-select>

											</div>
										

										</div>
										<div *ngIf="(f['accountClassificationIdOfIncomeStatement'].touched || f['accountClassificationIdOfIncomeStatement'].dirty ) && f['accountClassificationIdOfIncomeStatement'].invalid"
										class="validation alert-danger position-absolute">
										<i class="fa fa-close "></i>
										<span *ngIf="f['accountClassificationIdOfIncomeStatement'].errors && f['accountClassificationIdOfIncomeStatement'].errors['required']"
											class="f-12 ng-star-inserted text-white">
											{{'error.required'|translate}} </span>
									</div>
										<hr class="mt-3 mb-3 p-0">
										<div class="col-12 col-md-6">
											<div class="media">
												<label class="label-name"> {{'general.status'|translate}}
												</label>
												<div class="icon-state media-body">
													<label class="switch">
														<input type="checkbox" class="form-control" name="isActive"
															formControlName="isActive">
														<span class="switch-state"></span>
													</label>
												</div>
											</div>
										</div>
										<div class="align-items-end col-12 col-md-6 d-flex">
											<div class="media">
												<label class="label-name">
													{{'account.isLeafAccount'|translate}} </label>
												<div class="icon-state media-body">
													<label class="switch">
														<input type="checkbox" class="form-control" name="isLeafAccount"
															(change)="onChangeLeaf($event)"
															formControlName="isLeafAccount">
														<span class="switch-state"></span>
													</label>
												</div>
											</div>
										</div>
										<div class="col-12 col-md-6"
											*ngIf="accountForm.controls['isActive'].value==false;">
											<label for="code" class="label-name">
												{{'account.noteNotActive'|translate}}</label>
											<div class="form-group position-relative">

												<input type="text" class="form-control icon-branch" name="noteNotActive"
													formControlName="noteNotActive">


											</div>
										</div>
									</div>

								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>

	</div>
</section>
<app-public-search-modal [isVisible]="showSearchModal" [routeApi]="routeApi" (emitClose)="showSearchModal = false;"
	(emitSearch)="onSelectAccount($event)">
</app-public-search-modal>
<app-public-search-modal [isVisible]="showSearchModalCompany" [routeApi]="routeCompanyApi"
	(emitClose)="showSearchModalCompany = false;" (emitSearch)="onSelectCompany($event)">
</app-public-search-modal>
<app-public-search-modal [isVisible]="showSearchModalCostCenter" [routeApi]="routeCostCenterApi"
	(emitClose)="showSearchModalCostCenter = false;" (emitSearch)="onSelectCostCenter($event)">
</app-public-search-modal>
<app-public-search-modal [isVisible]="showSearchModalCurrency" [routeApi]="routeCurrencyApi"
	(emitClose)="showSearchModalCurrency = false;" (emitSearch)="onSelectCurrency($event)">
</app-public-search-modal>
<app-public-search-modal [isVisible]="showSearchModalAccountGroup" [routeApi]="routeAccountGroupApi"
	(emitClose)="showSearchModalAccountGroup = false;" (emitSearch)="onSelectAccountGroup($event)">
</app-public-search-modal>