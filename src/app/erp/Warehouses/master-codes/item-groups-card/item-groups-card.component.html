<ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="medium" color="#fff" type="ball-scale-multiple" [fullScreen]="true">
    <p style="color: white ;font-size: 20px;"> {{'general.loading'|translate}}... </p>
</ngx-spinner>
<button nz-button nzType="primary" (click)="expandAllRows()">
	{{ 'general.all' | translate }}
  </button>
<nz-table   #expandTable [nzBordered]="true" [nzData]="listOfMapData" nzTableLayout="fixed" class="table table-broder">
    <thead>
        <tr>
            <th> {{'general.code'|translate}}</th>
            <th> {{'general.nameAr'|translate}}</th>
            <th> {{'general.nameEn'|translate}}</th>
            <th>{{'general.actions'|translate}}</th>
        </tr>
    </thead>
    <tbody>
        <ng-container *ngFor="let data of expandTable.data">
          <ng-container *ngFor="let item of mapOfExpandedData[data.treeId]">
            <tr *ngIf="(item.parent && item.parent.expanded) || !item.parent">
              <td [nzIndentSize]="item.levelId! * 20" [nzShowExpand]="!!item.children||(!!item.itemCards&&item.itemCards.length>0)" [(nzExpand)]="item.expanded" (nzExpandChange)="collapse(mapOfExpandedData[data.treeId], item, $event)">
                <span class="tree-icon">
                  <i class="fa fa-folder" aria-hidden="true"></i>
                </span>
                {{ item.code }}
              </td>
              <td>{{ item.nameAr }}</td>
              <td>{{ item.nameEn }}</td>
              <td>
                <button nz-button nzType="primary" (click)="addNode(item.id)">{{ 'toolbar.new' | translate }}</button>
                <button nz-button nzType="default" (click)="onEdit(item.id)">{{ 'buttons.edit' | translate }}</button>
                <button nz-button nzType="danger" (click)="showConfirmDeleteMessage(item.id)">{{ 'buttons.delete' | translate }}</button>
              </td>
            </tr>
            <ng-container *ngFor="let childItem of item.itemCards">
              <tr *ngIf="item.expanded">
                <td [nzIndentSize]="(item.levelId! + 1) * 20">
                 
                  {{ childItem.code }}
                </td>
                <td>{{ childItem.nameAr }}</td>
                <td>{{ childItem.nameEn }}</td>
                <td>
                  <button nz-button nzType="primary" (click)="addNode(childItem.id)">{{ 'toolbar.new' | translate }}</button>
                  <button nz-button nzType="default" (click)="onEdit(childItem.id)">{{ 'buttons.edit' | translate }}</button>
                  <button nz-button nzType="danger" (click)="showConfirmDeleteMessage(childItem.id)">{{ 'buttons.delete' | translate }}</button>
                </td>
              </tr>
            </ng-container>
          </ng-container>
        </ng-container>
      </tbody>
</nz-table>
